<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title><%= chatbot.name %></title>
  <link rel="stylesheet" href="/public/chatbot/embed.css" />
</head>
<body>

<button class="chat-fab" id="chatToggle">
  <img id="chatAvatarFab" class="chat-avatar-fab" alt="Avatar" />
</button>

<div class="chat-welcome" id="chatWelcome">
  <span class="welcome-text"></span>
</div>

<div class="chat-widget" id="chatWidget">
  <div class="chat">
    <header class="chat-header">
      <img id="chatAvatarHeader" class="chat-avatar" alt="Avatar" />
      <div class="chat-header-info">
        <strong id="chatName"><%= chatbot.name %></strong>
        <div class="chat-status" id="chatStatus">Offline</div>
      </div>

      <div class="chat-actions">
        <button id="chatRestart" class="chat-restart" aria-label="Reiniciar conversación">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
            <path d="M1 4v6h6M23 20v-6h-6" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>

        <button class="chat-close" id="chatClose" aria-label="Cerrar">×</button>
      </div>
    </header>

    <main id="messages"></main>

    <footer>
      <input id="messageInput" autocomplete="off" />
      <button id="sendBtn" aria-label="Enviar mensaje">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
          <path d="M22 2L11 13" stroke="white" stroke-width="2"/>
          <path d="M22 2L15 22L11 13L2 9L22 2Z" stroke="white" stroke-width="2"/>
        </svg>
      </button>
    </footer>
  </div>
</div>

<script
  src="/public/chatbot/embed.js"
  data-config='<%- JSON.stringify(safeConfig) %>'>
</script>

</body>
</html>
